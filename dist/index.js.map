{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["import { __rest } from \"tslib\";\nimport React from 'react';\nimport { fetchContribution, } from './api/fetchContribution';\nimport ContributionTable from './components/ContributionTable';\nimport { convertContributionsToWeeks } from './utils/contribution';\nconst ContributionWrapper = (_a) => {\n    var { username, serverData } = _a, props = __rest(_a, [\"username\", \"serverData\"]);\n    const [contributions, setContributions] = React.useState([]);\n    const [total, setTotal] = React.useState(0);\n    const [loading, setLoading] = React.useState(false);\n    const [error, setError] = React.useState(null);\n    React.useEffect(() => {\n        setLoading(true);\n        if (serverData && serverData.weeks.length) {\n            try {\n                setContributions(serverData.weeks);\n                setTotal(serverData.totalContributions);\n            }\n            finally {\n                setLoading(false);\n            }\n        }\n        else {\n            fetchContribution({ username })\n                .then((res) => {\n                var _a;\n                const weeks = convertContributionsToWeeks(res.contributions);\n                setContributions(weeks);\n                setTotal((_a = res.total['lastYear']) !== null && _a !== void 0 ? _a : 0);\n                setLoading(false);\n            })\n                .catch((e) => {\n                setError(e);\n                setLoading(false);\n            });\n        }\n    }, []);\n    if (error || loading) {\n        error && console.error(error);\n        return (React.createElement(ContributionTable, Object.assign({ data: [], total: total, isHeader: props.isHeader, isDark: props.isDark }, props)));\n    }\n    return (React.createElement(ContributionTable, Object.assign({ data: contributions, total: total, isHeader: props.isHeader, isDark: props.isDark }, props)));\n};\nexport default ContributionWrapper;\n"],"names":["ContributionWrapper","_a","username","serverData","props","__rest","_React$useState","React","useState","_React$useState2","_slicedToArray","contributions","setContributions","_React$useState3","_React$useState4","total","setTotal","_React$useState5","_React$useState6","loading","setLoading","_React$useState7","_React$useState8","error","setError","useEffect","weeks","length","totalContributions","fetchContribution","then","res","convertContributionsToWeeks","e","console","createElement","ContributionTable","Object","assign","data","isHeader","isDark"],"mappings":"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"}