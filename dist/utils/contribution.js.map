{"version":3,"file":"contribution.js","sources":["../../src/utils/contribution.ts"],"sourcesContent":["import { DEFAULT_MONTH_LABELS } from '../constants/label';\nimport dayjs from 'dayjs';\nexport const getMonthLabels = (weeks) => {\n    return weeks\n        .reduce((prev, cur, idx) => {\n        var _a;\n        const firstDay = dayjs(cur.contributionDays[0].date).month();\n        const currentMonth = DEFAULT_MONTH_LABELS[firstDay];\n        const prevMonth = (_a = prev[prev.length - 1]) === null || _a === void 0 ? void 0 : _a.label;\n        if (idx === 0 || currentMonth !== prevMonth) {\n            return [...prev, { label: currentMonth, index: idx }];\n        }\n        return prev;\n    }, [])\n        .reduce((labels, current, idx, origin) => {\n        if (idx === origin.length - 1) {\n            const span = weeks.length - idx;\n            return [\n                ...labels,\n                {\n                    label: current.label,\n                    colSpan: span,\n                },\n            ];\n        }\n        const currentSpan = origin[idx + 1].index - current.index;\n        return [\n            ...labels,\n            {\n                label: current.label,\n                colSpan: currentSpan,\n            },\n        ];\n    }, []);\n};\nexport function generateEmptyContributions() {\n    const start = dayjs().startOf('year');\n    const end = dayjs().endOf('year');\n    const range = [];\n    let current = start;\n    while (!current.isAfter(end)) {\n        range.push({\n            date: current.format('YYYY-MM-DD'),\n            count: 0,\n        });\n        current = current.add(1, 'days');\n    }\n    return range;\n}\nexport function convertContributionsToWeeks(contributions) {\n    if (!contributions.length)\n        return [];\n    const weeks = [];\n    contributions.forEach((day) => {\n        const current = {\n            contributionCount: day.count,\n            date: day.date,\n        };\n        if (weeks[weeks.length - 1] &&\n            weeks[weeks.length - 1].contributionDays.length < 7) {\n            return weeks[weeks.length - 1].contributionDays.push(current);\n        }\n        return weeks.push({ contributionDays: [current] });\n    });\n    return weeks;\n}\n"],"names":["getMonthLabels","weeks","reduce","prev","cur","idx","_a","firstDay","dayjs","contributionDays","date","month","currentMonth","DEFAULT_MONTH_LABELS","prevMonth","length","label","concat","_toConsumableArray","index","labels","current","origin","span","colSpan","currentSpan","generateEmptyContributions","start","startOf","end","endOf","range","isAfter","push","format","count","add","convertContributionsToWeeks","contributions","forEach","day","contributionCount"],"mappings":"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"}